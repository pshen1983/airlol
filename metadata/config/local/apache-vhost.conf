<VirtualHost *:80>
    #ServerName www.example.com

    ServerAdmin webmaster@localhost
    DocumentRoot /opt/airlol

    <Directory /opt/airlol>
        RewriteEngine On
        RewriteCond %{REQUEST_URI} !^/rest/
        RewriteCond %{REQUEST_URI} !^/ajax/
        RewriteCond %{REQUEST_URI} !^/upload/
        RewriteCond %{REQUEST_URI} !^/page/routes.php
        RewriteRule ^ /page/routes.php/%{REQUEST_URI}
        Require all granted
    </Directory>

    <Directory /opt/airlol/rest>
        RewriteEngine On
        RewriteCond %{REQUEST_URI} ^/rest/
        RewriteCond %{REQUEST_URI} !^/rest/docs
        RewriteCond %{REQUEST_URI} !^/rest/routes.php
        RewriteRule ^ /rest/routes.php/%{REQUEST_URI}
        Require all granted
    </Directory>

    <Directory /opt/airlol/ajax>
        RewriteEngine On
        RewriteCond %{REQUEST_URI} ^/ajax/
        RewriteCond %{REQUEST_URI} !^/ajax/docs
        RewriteCond %{REQUEST_URI} !^/ajax/routes.php
        RewriteRule ^ /ajax/routes.php/%{REQUEST_URI}
        Require all granted
    </Directory>

    <Directory /opt/airlol/upload>
        Options FollowSymLinks
        AllowOverride None
        Require all granted
        ErrorDocument 403 /
    </Directory>

    ErrorDocument 404 /error/404

    ErrorLog /var/log/airlol/error.log
    CustomLog /var/log/airlol/access.log combined

</VirtualHost>